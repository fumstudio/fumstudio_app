
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Loading Page</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
  <style>
html {
  overflow-x: hidden; /* Prevent horizontal scrolling */
  width: 100%;
}

body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden; /* Ensure no horizontal overflow */
  position: relative;
}
    /* Desktop Sidebar */
    .sidebar {
      width: 250px;
      background-color: #FFFFFF;
      color: #1a2639;
      box-shadow: 4px 0 12px rgba(0,0,0,0.1);
      position: fixed;
      height: 100vh;
      z-index: 1000;
      padding: 20px 0;
      display: flex;
      flex-direction: column;
    }

    .sidebar .logo {
      font-size: 24px;
      font-weight: bold;
      padding: 0 20px 20px;
      border-bottom: 1px solid #eee;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }

    .logo .gift-icon {
      color: #e53935;
      margin-right: 10px;
      font-size: 20px;
    }

    .sidebar-menu {
      list-style: none;
      padding: 0;
      margin: 0;
      flex-grow: 1;
    }

    .sidebar-menu li {
      margin: 0;
    }

    .sidebar-menu a {
      display: block;
      text-decoration: none;
      color: #1a2639;
      font-weight: 500;
      padding: 12px 20px;
      transition: all 0.3s;
    }

    .sidebar-menu a:hover {
      background-color: #1a2639;
      color: #FFFFFF;
    }

    .sidebar-menu i {
      width: 24px;
      text-align: center;
      margin-right: 10px;
    }

    .sidebar-cart {
      padding: 20px;
      border-top: 1px solid #eee;
    }

    .cart-container {
      position: relative;
      display: inline-block;
      padding: 5px 10px;
    }

    .cart-icon {
      font-size: 18px;
      position: relative;
      color: #1a2639; /* Changed to black/dark color */
    }

    .mobile-cart .cart-icon {
      color: #1a2639; /* Mobile cart icon color */
    }

    .item-count {
      position: absolute;
      top: 0px;
      right: 8px;
      background-color: #e53935;
      color: #FFFFFF;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      margin-left: 250px;
    }

    /* Mobile Navbar */
    .mobile-navbar {
      display: none;
      background-color: #FFFFFF;
      padding: 15px 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 999;
      justify-content: space-between;
      align-items: center;
    }

    .mobile-navbar-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    }

    .mobile-navbar .logo {
      font-size: 20px;
      font-weight: bold;
      color: #1a2639;
      display: flex;
      align-items: center;
    }

    .mobile-nav-icons {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .menu-toggle {
      font-size: 24px;
      cursor: pointer;
      color: #1a2639;
      display: flex;
      align-items: center;
      transition: transform 0.3s;
    }

    .menu-toggle.open {
      transform: rotate(90deg);
    }

    .mobile-cart {
      position: relative;
      color: #1a2639;
      text-decoration: none;
    }

    .mobile-nav-menu {
      list-style: none;
      margin: 0;
      padding: 20px;
      background-color: #FFFFFF;
      position: fixed;
      top: 0;
      right: 0;
      width: 250px;
      height: 100vh;
      box-shadow: -8px 0 20px rgba(0, 0, 0, 0.1);
      display: none;
      z-index: 1001;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }

    .mobile-nav-menu.show {
      display: flex;
      transform: translateX(0);
    }

    .mobile-nav-menu li {
      margin-bottom: 15px;
    }

    .mobile-nav-menu a {
      display: block;
      padding: 12px 0;
      text-decoration: none;
      color: #1a2639;
      font-weight: 500;
    }

    .mobile-nav-menu i {
      width: 24px;
      text-align: center;
      margin-right: 10px;
    }

    .close-menu {
      align-self: flex-end;
      font-size: 24px;
      cursor: pointer;
      margin-bottom: 20px;
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      .sidebar {
        display: none;
      }

      .mobile-navbar {
        display: flex;
      }

      .main-content {
        margin-left: 0;
        margin-top: 60px; /* To account for fixed navbar */
      }
    }

    .user-link {
        color: #1a2639;
        cursor: default;
        transition: color 0.3s ease;
    }
    .user-link:hover {
        color: white;
    }
</style>

<body>
  <!-- Desktop Sidebar -->
  <nav class="sidebar">
    <div class="logo">
      <i class="fas fa-gift gift-icon"></i>
      Fumstudio
    </div>
    <ul class="sidebar-menu">
      <li><a href="Address_book.html"><i class="fas fa-address-book"></i>Address</a></li>
      <li><a href="orders.html"><i class="fas fa-receipt"></i>Orders</a></li>
      <li><a href="currency.html"><i class="fas fa-coins"></i>Currency</a></li>
      <li><a href="contact_us.html"><i class="fas fa-user-tie"></i>Contact us</a></li>
      <li><a href="logout.html" id="desktopLogout"><i class="fas fa-sign-out-alt"></i>Log Out</a></li>
    </ul>
    <div class="sidebar-cart">
      <a href="cart.html" class="cart-container">
        <i class="fas fa-shopping-cart cart-icon"></i>
        <span id="totalItemCount" class="item-count">0</span>
      </a>
    </div>
  </nav>

  <!-- Mobile Navbar -->
  <nav class="mobile-navbar">
    <div class="mobile-navbar-container">
      <div class="logo">
        <i class="fas fa-gift gift-icon"></i>
        Fumstudio
      </div>
      <div class="mobile-nav-icons">
        <a href="cart.html" class="mobile-cart">
          <i class="fas fa-shopping-cart cart-icon"></i>
          <span id="mobileItemCount" class="item-count">0</span>
        </a>
        <div class="menu-toggle" id="menuToggle" onclick="toggleMobileMenu()">
          <i class="fas fa-bars"></i>
        </div>
      </div>
    </div>
    <ul class="mobile-nav-menu" id="mobileNavMenu">
      <li class="close-menu" onclick="toggleMobileMenu()">
        <i class="fas fa-times"></i>
      </li>
      <li><a href="Address_book.html"><i class="fas fa-address-book"></i>Address</a></li>
      <li><a href="orders.html"><i class="fas fa-receipt"></i>Orders</a></li>
      <li><a href="currency.html"><i class="fas fa-coins"></i>Currency</a></li>
      <li><a href="contact_us.html"><i class="fas fa-user-tie"></i>Contact us</a></li>
      <li><a href="logout.html" id="mobileLogout"><i class="fas fa-sign-out-alt"></i>Log Out</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Your page content goes here -->
    
    
    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fumstudio - Premium Necklace Collections</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

      <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #F9F9F9; /* Gold */
            --secondary-color: #8b7355; /* Brown */
            --accent-color: #f5e8d0; /* Light beige */
            --text-dark: #FFFFFF;
            --text-light: #FFFFFF;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        body {
            background-color: #f9f7f3;
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Image Slider */
        .slider-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            height: 500px;
            margin-top: 20px;
            box-shadow: var(--shadow);
        }

        .slider {
            display: flex;
            width: 500%; /* 5 images */
            height: 100%;
            transition: transform 0.5s ease-in-out;
        }

        .slide {
            width: 20%;
            height: 100%;
            position: relative;
        }

        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background-color: #f5f5f5; /* Fallback color if image doesn't load */
        }

        .slide-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.3));
        }

        /* Text above buttons */
        .text-above-buttons {
            position: absolute;
            bottom: 160px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 32px;
            font-weight: 700;
            text-align: center;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
            letter-spacing: 1px;
            z-index: 10;
            width: 100%;
            padding: 0 20px;
        }

        /* Overlay Buttons - SIDE BY SIDE */
        .overlay-buttons {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 10;
            flex-direction: row;
            align-items: center;
        }

        .overlay-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            white-space: nowrap;
        }

        .whatsapp-btn {
            background-color: #25D366;
            color: white;
        }

        .whatsapp-btn:hover {
            background-color: #1da851;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .address-btn {
            background-color: #D6D500;
            color: #000000;
        }

        .address-btn:hover {
            background-color: #b8941f;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        /* Delivery Text */
        .delivery-info {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.95);
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 700;
            color: #000000;
            box-shadow: var(--shadow);
            z-index: 10;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .delivery-info i {
            color: #000000;
        }

        /* Product Grid */
        .products-container {
            max-width: 1200px;
            margin: 60px auto;
            padding: 0 20px;
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--secondary-color);
            font-size: 32px;
            position: relative;
            display: none;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background-color: var(--primary-color);
            display: none;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .product-card {
            background-color: var(--text-light);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-10px);
        }

        .product-img {
            height: 250px;
            overflow: hidden;
            background-color: #f5f5f5;
        }

        .product-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .product-card:hover .product-img img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 20px;
        }

        .product-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .product-price {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 20px;
            margin-bottom: 15px;
        }

        .product-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .product-btn:hover {
            background-color: var(--primary-color);
        }

        /* Footer */
        footer {
            background-color: #2c2c2c;
            color: var(--text-light);
            padding: 40px 0 20px;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
        }

        .footer-column h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #FFFFFF;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: var(--primary-color);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        .copyright {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #aaa;
            font-size: 14px;
        }

        /* Slider indicators */
        .slider-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .indicator.active {
            background-color: var(--primary-color);
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .slider-container {
                height: 400px;
            }
            
            .text-above-buttons {
                font-size: 28px;
                bottom: 140px;
            }
            
            .overlay-buttons {
                bottom: 90px;
            }
            
            .delivery-info {
                bottom: 35px;
            }
        }

        @media (max-width: 768px) {
            .slider-container {
                height: 350px;
                margin-top: 10px;
            }
            
            .text-above-buttons {
                font-size: 24px;
                bottom: 130px;
            }
            
            .overlay-buttons {
                bottom: 80px;
                gap: 15px;
            }
            
            .overlay-btn {
                padding: 12px 20px;
                font-size: 15px;
            }
            
            .delivery-info {
                bottom: 30px;
                font-size: 15px;
                padding: 10px 20px;
            }
        }

        @media (max-width: 576px) {
            .slider-container {
                height: 300px;
            }
            
            .text-above-buttons {
                font-size: 22px;
                bottom: 120px;
            }
            
            .overlay-buttons {
                flex-direction: row;
                bottom: 70px;
                gap: 10px;
            }
            
            .overlay-btn {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .delivery-info {
                bottom: 25px;
                font-size: 14px;
                padding: 8px 15px;
            }
            
            .products-container {
                margin: 40px auto;
            }
            
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
        }

        @media (max-width: 480px) {
            .slider-container {
                height: 250px;
            }
            
            .text-above-buttons {
                font-size: 20px;
                bottom: 110px;
            }
            
            .overlay-buttons {
                bottom: 60px;
                gap: 8px;
            }
            
            .overlay-btn {
                padding: 8px 12px;
                font-size: 13px;
            }
            
            .overlay-btn i {
                font-size: 14px;
            }
            
            .delivery-info {
                bottom: 20px;
                font-size: 13px;
                padding: 6px 12px;
            }
        }

        @media (max-width: 380px) {
            .slider-container {
                height: 220px;
            }
            
            .text-above-buttons {
                font-size: 18px;
                bottom: 100px;
            }
            
            .overlay-buttons {
                bottom: 50px;
                gap: 6px;
            }
            
            .overlay-btn {
                padding: 6px 10px;
                font-size: 12px;
            }
            
            .delivery-info {
                bottom: 15px;
                font-size: 12px;
                padding: 5px 10px;
            }
        }
    </style>  

</head>
<body>
    <!-- Image Slider -->
    <div class="slider-container">
        <div class="slider" id="imageSlider">
            <!-- Slide 1 -->
            <div class="slide">
                <img src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FFrosted%20memories%20captured%20in%20keychain.png?alt=media&token=a7513631-814f-40ec-8687-c95a3c2b594f" alt="Gold Necklace Collection">
                <div class="slide-overlay"></div>
            </div>
            
            <!-- Slide 2 -->
            <div class="slide">
                <img src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FBottle%20opener%20in%20wintry%20scene.png?alt=media&token=c5490344-d6d4-4e35-bdcd-899b4aaaccea" alt="Pearl Necklace">
                <div class="slide-overlay"></div>
            </div>
        </div>
        
        <!-- Slider Indicators -->
        <div class="slider-indicators" id="sliderIndicators">
            <div class="indicator active" onclick="goToSlide(0)"></div>
            <div class="indicator" onclick="goToSlide(1)"></div>
        </div>
        
        <!-- Text Above Buttons -->
        <div class="text-above-buttons">
            Self service 
        </div>
        
<div class="overlay-buttons">
    <button class="overlay-btn whatsapp-btn" data-action="whatsapp" data-phone="27626172613" data-message="Hello! I would like to make an inquiry.">
        <i class="fab fa-whatsapp"></i>
        <span>WhatsApp Inbox</span>
    </button>
    <button class="overlay-btn address-btn" data-action="address" data-url="/add-address">
        <i class="fas fa-map-marker-alt"></i>
        <span>Add Address</span>
    </button>
</div>

<!-- Delivery Info -->
<div class="delivery-info" data-action="delivery" data-url="/delivery-info">
    <i class="fas fa-shipping-fast"></i>
    <span>Fast Delivery: 1-5 Days</span>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Function to handle all click events
    document.addEventListener('click', function(e) {
        const element = e.target.closest('[data-action]');
        
        if (!element) return;
        
        const action = element.dataset.action;
        
        switch(action) {
            case 'whatsapp':
                // Use the phone number from data-phone attribute
                const phone = element.dataset.phone || '';
                const message = element.dataset.message || 'Hello! I have aquestion about Fum.studio';
                // Remove the extra 27626172613 from the URL construction
                const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
                break;
                
            case 'address':
                // Navigate to Address_book.html
                window.location.href = 'Address_book.html';
                break;
                
            case 'delivery':
                // Navigate to a delivery info page or show modal

                 window.location.href = 'delivery_info.html';
                break;
        }
    });
});
</script>
    </div>





    <!-- Product Grid -->
    <div class="products-container">
        <h2 class="section-title">Collection</h2>
    </div>

<script>
    // Simple slider functionality
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    
    function goToSlide(n) {
        currentSlide = n;
        const slider = document.querySelector('.slider');
        slider.style.transform = `translateX(-${currentSlide * 20}%)`;
        
        // Indicator code removed - dots are now hidden
    }
    
    // Remove indicator container from DOM if it exists
    document.addEventListener('DOMContentLoaded', function() {
        const indicatorContainer = document.querySelector('.slider-indicators, .indicators, .indicator-container, .dots');
        if (indicatorContainer) {
            indicatorContainer.style.display = 'none';
        }
        
        // Also hide individual indicators
        const indicators = document.querySelectorAll('.indicator, .dot');
        indicators.forEach(indicator => {
            indicator.style.display = 'none';
        });
    });
    
    // Auto slide change every 5 seconds
    setInterval(() => {
        currentSlide = (currentSlide + 1) % totalSlides;
        goToSlide(currentSlide);
    }, 5000);
    
    // Optional: Add CSS to hide indicators (alternative approach)
    // Uncomment the next line if you want to use CSS approach instead
    // document.head.insertAdjacentHTML('beforeend', '<style>.slider-indicators, .indicators, .indicator-container, .indicator, .dot { display: none !important; }</style>');
</script>
</body>
</html>
    

<style>
    :root {
        --main-brand-color: #1a2639;
        --text-color: #333;
        --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        background-color: #EFEFEF;
    }
    
    body {
        font-family: 'Montserrat', sans-serif;
        background-color: white;
        color: var(--text-color);
        margin: 0;
        padding: 0;
    }
    
    .header {
        padding: 15px;
        background: white;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .search-container {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
    }
    
    .search-input {
        flex: 1;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
        display:none;
    }
    
    .categories-section {
        position: relative;
    }
    
    .categories-heading {
        font-weight: bold;
        margin-bottom: 10px;
        font-size: 1.1rem;
    }
    
    .categories-nav {
        display: flex;
        gap: 10px;
        overflow-x: auto;
        padding-bottom: 10px;
        scrollbar-width: none;
    }
    
    .categories-nav::-webkit-scrollbar {
        display: none;
    }
    
    .category-btn {
        background: #f5f5f5;
        border: none;
        border-radius: 20px;
        padding: 8px 15px;
        font-size: 0.9rem;
        cursor: pointer;
        white-space: nowrap;
        transition: all 0.3s ease;
    }
    
    .category-btn.active {
        background: var(--main-brand-color);
        color: white;
    }
    
    .more-btn {
        position: sticky;
        right: 0;
        background: white;
        padding-left: 20px;
        display: flex;
        align-items: center;
    }
    
    .more-btn button {
        background: var(--main-brand-color);
        color: white;
        border: none;
        border-radius: 20px;
        padding: 8px 15px;
        font-size: 0.9rem;
        cursor: pointer;
        white-space: nowrap;
    }
    
    .categories-panel {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: white;
        z-index: 1000;
        padding: 20px;
        box-sizing: border-box;
        transform: translateY(-100%);
        transition: transform 0.3s ease;
        overflow-y: auto;
    }
    
    .categories-panel.open {
        transform: translateY(0);
    }
    
    .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    
    .panel-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--main-brand-color);
    }
    
    .close-panel {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
    }
    
    .panel-categories {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
    }
    
    .category-card {
        display: flex;
        flex-direction: column;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: var(--card-shadow);
        transition: transform 0.3s ease;
        border: 1px solid #f0f0f0;
        cursor: pointer;
    }
    
    .category-card:hover {
        transform: translateY(-5px);
    }
    
    .category-image-container {
        position: relative;
        width: 100%;
        height: 100px;
        overflow: hidden;
    }
    
    .category-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .category-name {
        padding: 10px;
        text-align: center;
        font-weight: bold;
        background: white;
    }
    
    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(10px);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
    }
    
    .loading-brand {
        color: #FFFFFF;
        font-size: 3rem;
        font-weight: bold;
        margin-bottom: 30px;
        text-shadow: 0 2px 4px #E3E4E9;
    }
    
    .loading-spinner {
        width: 50px;
        height: 50px;
        border: 5px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0px 0px 10px #FFFFFF;
        border-radius: 50%;
        border-top-color: #FFFFFF;
        animation: spin 1s ease-in-out infinite;
    }
    
    .items-container {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 5px;
        padding: 0px;
        max-width: 100%;
        margin: 0 auto;
        padding: 5px;
    }
    
    .item-card {
        background: white;
        overflow: hidden;
        box-shadow: var(--card-shadow);
        transition: transform 0.3s ease;
        position: relative;
        display: flex;
        flex-direction: column;
        width: 100%;
        height: 100%;
    }
    
    .item-card:hover {
        transform: translateY(-5px);
    }
    
    .item-image-container {
        flex: 1;
        position: relative;
        overflow: hidden;
        aspect-ratio: 2/3;
    }
    
    .item-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center top;
    }
    
    .item-details {
        padding: 12px;
    }
    
    .item-title {
        font-size: 0.9rem;
        margin: 0 0 5px 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-weight: bold;
    }
    
    .item-description {
        font-size: 0.8rem;
        color: #666;
        margin: 0 0 5px 0;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
        max-height: 2.4em;
        line-height: 1.2em;
    }
    
    .item-price {
        font-size: 12px;
        font-weight: 600;
    }
    
    .original-price {
        font-size: 10px;
        color: #999;
        text-decoration: line-through;
        margin-right: 5px;
    }
    
    .item-like {
        margin-top: 5px;
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 0.8rem;
        color: #1a2639;
    }
    
    .new-badge {
        background-color: #ff4757;
        color: white;
        padding: 2px 5px;
        border-radius: 3px;
        font-size: 0.7rem;
        font-weight: bold;
        margin-left: 5px;
    }
    
    .update-notification {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--main-brand-color);
        color: white;
        padding: 10px 15px;
        border-radius: 5px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        z-index: 1000;
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s ease;
    }
    
    .update-notification.show {
        transform: translateY(0);
        opacity: 1;
    }
    
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    
    @media (min-width: 768px) {
        .items-container {
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
        }
        
        .panel-categories {
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }
        
        .category-image-container {
            height: 150px;
        }
        
        .item-title {
            font-size: 1rem;
        }
        
        .item-description {
            font-size: 0.9rem;
        }
        
        .loading-brand {
            font-size: 4rem;
        }
        
        .loading-spinner {
            width: 70px;
            height: 70px;
            border-width: 7px;
        }
        
        .categories-panel {
            width: 80%;
            max-width: 800px;
            left: 50%;
            transform: translate(-50%, -150%);
            height: auto;
            max-height: 80vh;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .categories-panel.open {
            transform: translate(-50%, 20px);
        }
    }
</style>

    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-brand"></div>
        <div class="loading-spinner"></div>
    </div>
    
    <div class="header">
        <div class="search-container">
            <input type="text" id="search-input" class="search-input" placeholder="Search items...">
        </div>
        
        <div class="categories-section">
            <div class="categories-heading">Categories</div>
            <div class="categories-nav" id="categories-nav">
                <div class="more-btn">
                    <button id="more-categories-btn">More...</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="categories-panel" id="categories-panel">
        <div class="panel-header">
            <div class="panel-title">All Categories</div>
            <button class="close-panel" id="close-panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="panel-categories" id="panel-categories"></div>
    </div>
    
    <div id="items-container" class="items-container"></div>

    <div id="update-notification" class="update-notification">
        <i class="fas fa-sync-alt"></i> Items updated
    </div>

<script type="module">
import { initializeApp, getApp, getApps } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import { getDatabase, ref, onValue, get } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

const firebaseConfig = {
    apiKey: "AIzaSyCg8WRJx4wu-kkynIIIiLbbU5GaTxU-E9s",
    authDomain: "fumstudio-b6694.firebaseapp.com",
    databaseURL: "https://fumstudio-b6694-default-rtdb.firebaseio.com",
    projectId: "fumstudio-b6694",
    storageBucket: "fumstudio-b6694.firebasestorage.app",
    messagingSenderId: "505195774753",
    appId: "1:505195774753:web:7b94be0cf52e52a22f7460",
    measurementId: "G-E4LBX75DR0"
};

// Initialize Firebase
const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();
const database = getDatabase(app);
const auth = getAuth(app);

// Local storage keys
const LOCAL_STORAGE_ITEMS_KEY = 'fumstudio_items_cache';
const LOCAL_STORAGE_LAST_UPDATE_KEY = 'fumstudio_last_update';
const LOCAL_STORAGE_SHUFFLE_SEED_KEY = 'fumstudio_shuffle_seed';

// DOM elements
const itemsContainer = document.getElementById('items-container');
const loadingOverlay = document.getElementById('loading-overlay');
const searchInput = document.getElementById('search-input');
const categoriesNav = document.getElementById('categories-nav');
const moreCategoriesBtn = document.getElementById('more-categories-btn');
const categoriesPanel = document.getElementById('categories-panel');
const closePanelBtn = document.getElementById('close-panel');
const panelCategories = document.getElementById('panel-categories');
const updateNotification = document.getElementById('update-notification');

// App state
let allItems = {};
let allCategories = new Set(['all']);
let activeCategory = 'all';
let searchQuery = '';
let visibleCategories = 5;
let lastUpdateTime = Date.now();
let updateTimeout = null;
let categoryImages = {};
let selectedCurrency = 'ZAR';

const conversionRates = {
    'USD': 0.054,
    'EUR': 0.050,
    'ZAR': 1
};

// Function to check if audience is public - UPDATED
function isPublicAudience(audience) {
    if (!audience) return false; // If no audience specified, treat as not public
    const audienceLower = audience.toLowerCase().trim();
    
    // Check for private/onlyme variations
    const isPrivate = audienceLower === 'private' || 
                      audienceLower === 'only me' || 
                      audienceLower === 'onlyme';
    
    // Only return true if explicitly "public"
    return audienceLower === 'public';
}

// Seeded shuffle function for consistent daily shuffling
function seededShuffle(array, seed) {
    let currentSeed = seed;
    const shuffled = [...array];
    
    function random() {
        const x = Math.sin(currentSeed++) * 10000;
        return x - Math.floor(x);
    }
    
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    
    return shuffled;
}

// Get or create a daily seed for shuffling
function getDailySeed() {
    const today = new Date().toDateString();
    const storedSeed = localStorage.getItem(LOCAL_STORAGE_SHUFFLE_SEED_KEY);
    
    if (storedSeed) {
        const { date, seed } = JSON.parse(storedSeed);
        if (date === today) {
            return seed;
        }
    }
    
    // Create a new seed for today
    const newSeed = Math.floor(Math.random() * 1000000);
    localStorage.setItem(LOCAL_STORAGE_SHUFFLE_SEED_KEY, 
        JSON.stringify({ date: today, seed: newSeed }));
    return newSeed;
}

// Price conversion and formatting
function convertPrice(price, currency) {
    if (!price) return 'Price not available';
    
    const numericPrice = parseFloat(price);
    if (isNaN(numericPrice)) return price;
    
    if (currency === 'ZAR') {
        return `R ${numericPrice.toFixed(2)}`;
    } else if (conversionRates[currency]) {
        const convertedPrice = numericPrice * conversionRates[currency];
        return `${currency} ${convertedPrice.toFixed(2)}`;
    }
    return `$${numericPrice.toFixed(2)}`;
}

function updateAllPrices(currency) {
    const priceElements = document.querySelectorAll('.price-container');
    priceElements.forEach(container => {
        const originalPrice = container.dataset.originalPrice;
        const displayPrice = container.dataset.displayPrice;
        
        const priceToShow = originalPrice || displayPrice;
        const formattedPrice = convertPrice(priceToShow, currency);
        
        if (originalPrice && displayPrice && originalPrice !== displayPrice) {
            container.innerHTML = `
                <span class="original-price">${convertPrice(originalPrice, currency)}</span>
                <span class="item-price">${convertPrice(displayPrice, currency)}</span>
            `;
        } else {
            container.innerHTML = `<span class="item-price">${formattedPrice}</span>`;
        }
    });
}

// Category management - UPDATED TO CHECK IMAGE AUDIENCE
function updateCategories() {
    allCategories = new Set(['all']);
    categoryImages = {};
    
    Object.entries(allItems).forEach(([itemId, itemData]) => {
        // Check item level audience first
        if (itemData.itemAudience && !isPublicAudience(itemData.itemAudience)) {
            return; // Skip private items at item level
        }
        
        if (!itemData.images) return;
        
        // Check if item has at least one public image
        let hasPublicImage = false;
        let firstPublicImageUrl = '';
        
        Object.entries(itemData.images).forEach(([imageIndex, imageData]) => {
            const mainImage = imageData.mainImage;
            if (mainImage) {
                // Check image level audience
                const imageAudience = mainImage.audience || itemData.itemAudience || '';
                if (isPublicAudience(imageAudience)) {
                    hasPublicImage = true;
                    if (!firstPublicImageUrl && mainImage.url) {
                        firstPublicImageUrl = mainImage.url;
                    }
                }
            }
        });
        
        if (!hasPublicImage) return;
        
        // Add categories from items with public images
        if (itemData.categories) {
            itemData.categories.forEach(cat => {
                allCategories.add(cat);
                if (!categoryImages[cat] && firstPublicImageUrl) {
                    categoryImages[cat] = firstPublicImageUrl;
                }
            });
        }
    });
    
    updateCategoriesNav();
    updatePanelCategories();
}

function updateCategoriesNav() {
    const existingButtons = categoriesNav.querySelectorAll('.category-btn');
    existingButtons.forEach(btn => btn.remove());
    
    const allBtn = document.createElement('button');
    allBtn.className = `category-btn ${activeCategory === 'all' ? 'active' : ''}`;
    allBtn.textContent = 'All';
    allBtn.dataset.category = 'all';
    allBtn.addEventListener('click', () => {
        setActiveCategory('all');
    });
    categoriesNav.insertBefore(allBtn, categoriesNav.querySelector('.more-btn'));
    
    const categoriesArray = Array.from(allCategories).filter(cat => cat !== 'all');
    const visibleCats = categoriesArray.slice(0, visibleCategories);
    
    visibleCats.forEach(category => {
        const btn = document.createElement('button');
        btn.className = `category-btn ${activeCategory === category ? 'active' : ''}`;
        btn.textContent = category;
        btn.dataset.category = category;
        btn.addEventListener('click', () => {
            setActiveCategory(category);
        });
        categoriesNav.insertBefore(btn, categoriesNav.querySelector('.more-btn'));
    });
    
    moreCategoriesBtn.style.display = categoriesArray.length > visibleCategories ? 'block' : 'none';
}

function updatePanelCategories() {
    panelCategories.innerHTML = '';
    const categoriesArray = Array.from(allCategories).filter(cat => cat !== 'all');
    
    categoriesArray.forEach(category => {
        const card = document.createElement('div');
        card.className = 'category-card';
        card.dataset.category = category;
        card.addEventListener('click', () => {
            setActiveCategory(category);
            categoriesPanel.classList.remove('open');
        });
        
        const imageUrl = categoryImages[category] || '';
        
        card.innerHTML = `
            <div class="category-image-container">
                ${imageUrl ? 
                    `<img src="${imageUrl}" alt="${category}" class="category-image">` : 
                    `<div style="background: #f5f5f5; height: 100%; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-tag" style="color: #8a2be2; font-size: 2rem;"></i>
                    </div>`
                }
            </div>
            <div class="category-name">${category}</div>
        `;
        
        panelCategories.appendChild(card);
    });
}

function setActiveCategory(category) {
    activeCategory = category;
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.category === category);
    });
    filterItems();
}

// Item filtering and display - UPDATED TO CHECK BOTH AUDIENCE LEVELS
function filterItems() {
    console.log("Filtering items - Category:", activeCategory, "Search:", searchQuery);
    
    itemsContainer.innerHTML = '';
    
    if (Object.keys(allItems).length === 0) {
        itemsContainer.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px;">No items found</div>';
        return;
    }
    
    const now = new Date();
    const fiveDaysAgo = new Date(now.getTime() - (5 * 24 * 60 * 60 * 1000));
    
    // Filter by category, search, and BOTH audience levels
    let filteredCards = [];
    
    Object.entries(allItems).forEach(([itemId, itemData]) => {
        // First check item level audience
        const itemAudience = itemData.itemAudience || '';
        if (!isPublicAudience(itemAudience)) {
            return; // Skip entire item if item level is not public
        }
        
        // Category filter
        if (activeCategory !== 'all' && 
            (!itemData.categories || !itemData.categories.includes(activeCategory))) {
            return;
        }
        
        if (!itemData.images) return;
        
        const itemCreatedAt = itemData.createdAt ? new Date(itemData.createdAt) : new Date(0);
        
        // Check each image group
        Object.entries(itemData.images).forEach(([imageIndex, imageData]) => {
            const mainImage = imageData.mainImage;
            if (!mainImage) return;
            
            // Check image level audience
            const imageAudience = mainImage.audience || itemAudience;
            if (!isPublicAudience(imageAudience)) {
                return; // Skip this image if not public
            }
            
            const title = itemData.title?.toLowerCase() || '';
            const description = mainImage.description?.toLowerCase() || '';
            
            // Search filter
            if (searchQuery && 
                !title.includes(searchQuery) && 
                !description.includes(searchQuery)) {
                return;
            }
            
            const imageCreatedAt = imageData.createdAt ? new Date(imageData.createdAt) : itemCreatedAt;
            const isNew = imageCreatedAt > fiveDaysAgo;
            
            filteredCards.push({
                itemId,
                itemData,
                mainImage,
                imageIndex,
                isNew,
                createdAt: imageCreatedAt.getTime()
            });
        });
    });
    
    console.log("Filtered public items count:", filteredCards.length);
    
    // Apply daily shuffle only to the filtered results
    const dailySeed = getDailySeed();
    const shuffledCards = seededShuffle(filteredCards, dailySeed);
    
    // Display the shuffled but properly filtered items
    shuffledCards.forEach(card => {
        createItemCard(card.itemId, card.itemData, card.mainImage, card.imageIndex, card.isNew);
    });
    
    if (itemsContainer.innerHTML === '') {
        itemsContainer.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px;">No public items found</div>';
    }
}

function createItemCard(itemId, itemData, mainImage, imageIndex, isNew) {
    const itemCard = document.createElement('div');
    itemCard.className = 'item-card';
    
    const imageUrl = mainImage?.url || '';
    const originalPrice = mainImage?.originalPrice;
    const displayPrice = mainImage?.displayPrice;
    const description = mainImage?.description || 'No description available';
    const likes = mainImage?.likes || 0;
    const title = itemData.title || 'Untitled Item';
    
    const formattedLikes = likes >= 1000 
        ? (likes % 1000 === 0 
            ? `${likes / 1000}k` 
            : `${(Math.round(likes / 100) / 10).toFixed(1)}k`
          ) 
        : likes;
    
    itemCard.innerHTML = `
        <div class="item-image-container">
            ${imageUrl ? 
                `<img src="${imageUrl}" alt="${title}" class="item-image">` : 
                `<div style="background: #f8f8f8; height: 100%; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-gem" style="color: #8a2be2; font-size: 2rem;"></i>
                </div>`
            }
        </div>
        <div class="item-details">
            <div class="item-title" title="${title}">${title}</div>
            <div class="item-description" title="${description}">${description}</div>
            <div class="price-container" 
                 data-original-price="${originalPrice || ''}" 
                 data-display-price="${displayPrice || ''}">
                ${originalPrice && originalPrice !== displayPrice ? 
                    `<span class="original-price">${convertPrice(originalPrice, selectedCurrency)}</span>` : ''}
                <span class="item-price">${convertPrice(displayPrice || originalPrice, selectedCurrency)}</span>
            </div>
            <div class="item-like">
                <i class="fas fa-heart"></i>
                <span>${formattedLikes} likes</span>
                ${isNew ? '<span class="new-badge">New</span>' : ''}
            </div>
        </div>
        <a href="view-item.html?itemId=${itemId}&image=${imageIndex}" style="position: absolute; inset: 0; z-index: 1;"></a>
    `;
    
    itemsContainer.appendChild(itemCard);
}

// Data loading and caching
function getCachedItems() {
    const cachedData = localStorage.getItem(LOCAL_STORAGE_ITEMS_KEY);
    const lastUpdate = localStorage.getItem(LOCAL_STORAGE_LAST_UPDATE_KEY);
    
    if (cachedData && lastUpdate) {
        try {
            return {
                items: JSON.parse(cachedData),
                lastUpdate: parseInt(lastUpdate)
            };
        } catch (e) {
            console.error("Error parsing cached data", e);
            return null;
        }
    }
    return null;
}

function cacheItems(items, timestamp) {
    try {
        localStorage.setItem(LOCAL_STORAGE_ITEMS_KEY, JSON.stringify(items));
        localStorage.setItem(LOCAL_STORAGE_LAST_UPDATE_KEY, timestamp.toString());
    } catch (e) {
        console.error("Error caching data", e);
    }
}

function calculateDataHash(items) {
    let hash = 0;
    const str = JSON.stringify(items);
    for (let i = 0; i < str.length; i++) {
        const char = str.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash;
    }
    return hash;
}

function loadAllItems() {
    const cached = getCachedItems();
    const currentTime = Date.now();
    
    if (cached) {
        allItems = cached.items;
        updateCategories();
        filterItems();
        loadingOverlay.style.display = 'none';
    }

    const itemsRef = ref(database, 'items');
    
    onValue(itemsRef, (snapshot) => {
        const newItems = snapshot.val() || {};
        const newHash = calculateDataHash(newItems);
        const oldHash = calculateDataHash(allItems);
        
        if (newHash !== oldHash) {
            allItems = newItems;
            cacheItems(allItems, currentTime);
            
            updateCategories();
            filterItems();
            
            if (!cached) {
                loadingOverlay.style.display = 'none';
            }
            
            if (cached && currentTime - lastUpdateTime > 1000) {
                showUpdateNotification();
            }
            
            lastUpdateTime = currentTime;
        } else if (!cached) {
            loadingOverlay.style.display = 'none';
        }
    }, {
        onlyOnce: false
    });
}

// Event listeners and initialization
onAuthStateChanged(auth, (user) => {
    if (user) {
        const userId = user.uid;
        const userRef = ref(database, `users/${userId}/selectedCurrency`);
        
        get(userRef).then((snapshot) => {
            const currency = snapshot.exists() ? snapshot.val() : 'ZAR';
            selectedCurrency = currency;
            updateAllPrices(currency);
        }).catch((error) => {
            console.error("Error fetching currency:", error);
            selectedCurrency = 'ZAR';
            updateAllPrices('ZAR');
        });
    } else {
        selectedCurrency = 'ZAR';
        updateAllPrices('ZAR');
    }
});

searchInput.addEventListener('input', (e) => {
    searchQuery = e.target.value.toLowerCase();
    filterItems();
});

moreCategoriesBtn.addEventListener('click', () => {
    categoriesPanel.classList.add('open');
});

closePanelBtn.addEventListener('click', () => {
    categoriesPanel.classList.remove('open');
});

function showUpdateNotification() {
    updateNotification.classList.add('show');
    clearTimeout(updateTimeout);
    updateTimeout = setTimeout(() => {
        updateNotification.classList.remove('show');
    }, 3000);
}

// Initialize the app
loadAllItems();
</script>
</body>
</html>
   <!-- Footer -->
  <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>Fumstudio</h3>
                <p>We specialize in creating stunning, custom frames that showcase your treasured memories. From elegant classics to modern masterpieces, our expert team crafts each frame with precision and passion. Whether you're looking for a unique gift, a statement piece for your home or office, or a way to preserve your precious photos.</p>
                <div style="margin-top: 20px;">
                    <i class="fas fa-gift" style="color: var(--primary-color); font-size: 24px;"></i>
                </div>
            </div>
            
            <div class="footer-column">
                <h3>Customer Service</h3>
                <ul class="footer-links">
                    <li><a href="contact_us.html">Contact Us</a></li>
                    <li><a href="Shipping_info.html">Shipping Info</a></li>
                    <li><a href="Shipping_info.html">Returns & Exchanges</a></li>

                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Connect With Us</h3>
                <ul class="footer-links">
                    <li><a href="https://web.facebook.com/fumstar.ntulie/"><i class="fab fa-facebook"></i> Facebook</a></li>
                    <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>

                    <li><a href="https://wa.me/27626172613"><i class="fab fa-whatsapp"></i> WhatsApp</a></li>

                </ul>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2023 Fumstudio. All rights reserved. | Premium Jewelry Collections</p>
        </div>
    </footer>
   
  </div>

  <script>
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileNavMenu');
      const toggleBtn = document.getElementById('menuToggle');
      
      menu.classList.toggle('show');
      toggleBtn.classList.toggle('open');
      
      // Toggle between bars and times icon
      const icon = toggleBtn.querySelector('i');
      if (menu.classList.contains('show')) {
        icon.classList.remove('fa-bars');
        icon.classList.add('fa-times');
      } else {
        icon.classList.remove('fa-times');
        icon.classList.add('fa-bars');
      }
    }

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
      const menu = document.getElementById('mobileNavMenu');
      const toggleBtn = document.getElementById('menuToggle');
      const mobileNavbar = document.querySelector('.mobile-navbar');
      
      if (menu.classList.contains('show') && 
          !menu.contains(event.target) && 
          event.target !== toggleBtn && 
          !toggleBtn.contains(event.target)) {
        toggleMobileMenu();
      }
    });
  </script>

  <!-- Firebase Script -->
 
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCg8WRJx4wu-kkynIIIiLbbU5GaTxU-E9s",
    authDomain: "fumstudio-b6694.firebaseapp.com",
    databaseURL: "https://fumstudio-b6694-default-rtdb.firebaseio.com",
    projectId: "fumstudio-b6694",
    storageBucket: "fumstudio-b6694.firebasestorage.app",
    messagingSenderId: "505195774753",
    appId: "1:505195774753:web:7b94be0cf52e52a22f7460",
    measurementId: "G-E4LBX75DR0"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const auth = getAuth(app);

  // Global function to update cart count in both desktop and mobile views
  function updateCartCount(count) {
    const desktopCount = document.getElementById('totalItemCount');
    const mobileCount = document.getElementById('mobileItemCount');
    
    if (desktopCount) desktopCount.textContent = count;
    if (mobileCount) mobileCount.textContent = count;
    
    // Add/remove active class based on count
    [desktopCount, mobileCount].forEach(element => {
      if (element) {
        element.classList.toggle('has-items', count > 0);
      }
    });
  }

  // Function to calculate total items in cart
  function calculateTotalItems(cartData) {
    if (!cartData) return 0;
    
    // Handle both object and array formats
    const items = Array.isArray(cartData) 
      ? cartData 
      : Object.values(cartData);
    
    return items.reduce((total, item) => {
      return total + (item.quantity || 1);
    }, 0);
  }

  // Setup cart listener for a user
  function setupCartListener(userId) {
    const cartRef = ref(db, `carts/${userId}/cartItems`);
    
    onValue(cartRef, (snapshot) => {
      const count = snapshot.exists() 
        ? calculateTotalItems(snapshot.val()) 
        : 0;
      updateCartCount(count);
    }, {
      onlyOnce: false // Keep listening for changes
    });
  }

  // Handle auth state changes
  onAuthStateChanged(auth, (user) => {
    if (user) {
      // User is logged in - setup cart listener
      setupCartListener(user.uid);
      
      // Add user email to menus
      const desktopEmailItem = document.createElement('li');
      desktopEmailItem.innerHTML = `<a class="user-link">
    <i class="fas fa-user"></i> ${user.email}
</a> `;
      document.querySelector('.sidebar-menu').insertBefore(
        desktopEmailItem, 
        document.getElementById('desktopLogout').parentNode
      );

      const mobileEmailItem = document.createElement('li');
      mobileEmailItem.innerHTML = `<a style="color: #1a2639; cursor: default;">
                                  <i class="fas fa-user"></i> ${user.email}
                                </a>`;
      document.getElementById('mobileNavMenu').insertBefore(
        mobileEmailItem,
        document.getElementById('mobileLogout').parentNode
      );

      // Setup logout handlers
      const handleLogout = async (e) => {
        e.preventDefault();
        try {
          await signOut(auth);
          window.location.href = "login.html";
        } catch (error) {
          console.error("Logout error:", error);
          window.location.href = "login.html";
        }
      };

      document.getElementById('desktopLogout').addEventListener('click', handleLogout);
      document.getElementById('mobileLogout').addEventListener('click', handleLogout);
      
    } else {
      // User not logged in - set count to 0 and change logout to login
      updateCartCount(0);
      
      document.getElementById('desktopLogout').innerHTML = '<i class="fas fa-sign-in-alt"></i>Log In';
      document.getElementById('mobileLogout').innerHTML = '<i class="fas fa-sign-in-alt"></i>Log In';
      
      const handleLogin = (e) => {
        e.preventDefault();
        window.location.href = "login.html";
      };

      document.getElementById('desktopLogout').addEventListener('click', handleLogin);
      document.getElementById('mobileLogout').addEventListener('click', handleLogin);
    }
  });
</script>

    <style>
        .whatsapp-chat-button {

            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: #25D366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .whatsapp-chat-button:hover {
            background-color: #128C7E;
            transform: scale(1.1);
        }
        
        .whatsapp-chat-button img {
            width: 36px;
            height: 36px;
        }
        
        /* Optional tooltip */
        .whatsapp-chat-button::before {
            content: "Chat with us";
            position: absolute;
            right: 70px;
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
        }
        
        .whatsapp-chat-button:hover::before {
            opacity: 1;
        }
    </style>

    <!-- Your website content goes here -->
    
    <!-- WhatsApp chat button -->
    <div class="whatsapp-chat-button" id="whatsappButton" style="  display:none;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    </div>

    <script>
        document.getElementById('whatsappButton').addEventListener('click', function() {
            // Replace with your WhatsApp number (include country code, remove any +, 0, or spaces)
            const phoneNumber = '27728662309';
            
            // Optional: Add a default message (URL encoded)
            const defaultMessage = 'Hello%20I%20have%20a%20question';
            
            // Open WhatsApp chat
            window.open(`https://wa.me/${phoneNumber}?text=${defaultMessage}`, '_blank');
        });
    </script>

</body>
</html>

